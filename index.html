<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
</head>

<body>
<h1>We are loading Music Instrument Giphys!</h1>
<div id="container">
	
</div>
<br>
	<form>
	<input type="text" id="userTopic">
	<br><br>
	<button id="but">button</button>
	</form>
<br>
<div id="display"></div>

<script>
	/////////DONE////////////// GLOBAL VARIABLES ///////////////DONE///////////
	let topics = ["keyboard", "piano", "trumpet", "flute", "drums", "guitar"];
	let userTopic = "";
	let pic = "";
	let btn = "";
	
	////////DONE/////////////  CREATE BUTTON FUNCTION  //////////DONE//////////

	createButton(topics);

	function createButton(arr){

	// creating buttons with the array with for loop
	for(let i = 0; i < arr.length; i++){	

	// adding a class name to the buttons	
	let btn = $("<button>").attr("data-name", arr[i]).append(arr[i]);		
	//console.log();
	// adding buttons to the html
	$("#container").append(btn);		

		} // end of for loop
		
	} // end of create button

	////////DONE/////////////  CREATE BUTTON FUNCTION END ///////DONE//////////
	
	// added click event to the button class //////////////////////////////////
	
	
	$("#container").on('click', function(e){
		
	let button = e.target.getAttribute('data-name');
	
	$("#display").empty();
	
	// AJAX CALL //////////////////////////////////////////////////////////////	
	let queryURL = "http://api.giphy.com/v1/gifs/search?q=" + button + "&api_key=SVXiEXxf6IH7cE2gz7Fo6wBtlSvsSJzq";
		
	$.ajax({
		url: queryURL,
		method: "GET"
	}).then(function(response){
		
		//let button = e.currentTarget;
		let results = response.data;
		// for loop to call 10 [still] images
		for (let j = 0; j < 10; j++) {
		
            pic = $("<img>");
		
            pic.attr("src", results[j].images["480w_still"].url);
			let rating = results[j].rating;
		
			// add rating below image
			$("#display").append(pic)
			$("#display").append("<p>" + rating + "</p>");
			
			} // end of for loop
		
		// toggle start and pause on images function
		
		}); // end of ajax function

	}); // end of event function
	
	
	/////// stand alone function ////////////////
	
	let ig = $("img");
	console.log(ig);
	////// stand alone function /////////////////
	
	
// create buttons function	
$("#but").on('click', function(e){
	e.preventDefault();
	let userTopic = $("#userTopic").val().trim().split(" ");
    createButton(userTopic);
	$("#userTopic").val("");
});

//4. When the user clicks one of the still GIPHY images, the gif should animate. If the user clicks the gif again, it should stop playing.
//
//5. Under every gif, display its rating (PG, G, so on).
//   * This data is provided by the GIPHY API.
//   * Only once you get images displaying with button presses should you move on to the next step.
//
//6. Add a form to your page that takes a value from a user input box and adds it to your `topics` array. Then make a function call that takes each topic in the array and remakes the buttons on the page.
//SVXiEXxf6IH7cE2gz7Fo6wBtlSvsSJzq

</script>
<script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>	
</body>
</html>
